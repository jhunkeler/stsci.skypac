

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Utility functions for skypac. &mdash; SkyPac 0.7 (30-May-2014) documentation</title>
    
    <link rel="stylesheet" href="_static/stsci_sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.7 (30-May-2014)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="SkyPac 0.7 (30-May-2014) documentation" href="index.html" />
    <link rel="prev" title="Sky statistics functions for skypac." href="skystatistics.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="skystatistics.html" title="Sky statistics functions for skypac."
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">SkyPac 0.7 (30-May-2014) documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/stsci_logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="skystatistics.html"
                        title="previous chapter">Sky statistics functions for skypac.</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/utils.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-stsci.skypac.utils">
<span id="utility-functions-for-skypac"></span><h1>Utility functions for skypac.<a class="headerlink" href="#module-stsci.skypac.utils" title="Permalink to this headline">¶</a></h1>
<p>This module provides utility functions for use
by <tt class="xref py py-mod docutils literal"><span class="pre">stsci.skypac</span></tt> module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Authors:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Mihai Cara (contact: <a class="reference external" href="mailto:help&#37;&#52;&#48;stsci&#46;edu">help<span>&#64;</span>stsci<span>&#46;</span>edu</a>)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">License:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><a class="reference external" href="http://www.stsci.edu/resources/software_hardware/pyraf/LICENSE">http://www.stsci.edu/resources/software_hardware/pyraf/LICENSE</a></td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="stsci.skypac.utils.MultiFileLog">
<em class="property">class </em><tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">MultiFileLog</tt><big>(</big><em>console=True</em>, <em>enableBold=True</em>, <em>flog=None</em>, <em>append=True</em>, <em>autoflush=True</em>, <em>appendEOL=True</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a class that facilitates writting to multiple files.
<a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> stores multiple file objects and can write the same
log entry to all of them. It also facilitates controlling when a
function can close a log file. Finally, it provides some utility
functions that automate such things as appending EOL at the end of the
log entry, flushing the files (to avoid losing log entries in case of
uncaught exceptions), displaying <tt class="docutils literal"><span class="pre">WARNING</span></tt>, <tt class="docutils literal"><span class="pre">ERROR</span></tt>, etc. in bold
on standard streams (sys.stdout, etc.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>console</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Enables writting to the standard output.</p>
</div></blockquote>
<p><strong>enableBold</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Enable or disable writing bold text to console, e.g., &#8216;WARNING:&#8217;
&#8216;ERROR:&#8217;, etc.</p>
</div></blockquote>
<p><strong>flog</strong> : str, file, None, list of str or file objects (Default = None)</p>
<blockquote>
<div><p>File name or file object to be added to <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> during the
initialization. More files can be added lated with
<a class="reference internal" href="#stsci.skypac.utils.MultiFileLog.add_logfile" title="stsci.skypac.utils.MultiFileLog.add_logfile"><tt class="xref py py-meth docutils literal"><span class="pre">add_logfile()</span></tt></a>.</p>
</div></blockquote>
<p><strong>append</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Default open mode for the files that need to be opened (e.g., that
are passed as file names). If <tt class="xref py py-obj docutils literal"><span class="pre">append</span></tt> is <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, new files added
to a <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> object will be opened in the &#8220;append&#8221;
mode: new log entries will be appended to existing files &#8211; same as
mode &#8216;a&#8217; of standard function <a class="reference external" href="http://docs.python.org/library/functions.html#open" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">open()</span></tt></a>. When <tt class="xref py py-obj docutils literal"><span class="pre">append</span></tt> is
<a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a>, any existing files will be overwritten.</p>
</div></blockquote>
<p><strong>autoflush</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Indicates whether or not to flush files after each log entry.</p>
</div></blockquote>
<p><strong>appendEOL</strong> : bool (Default = True)</p>
<blockquote class="last">
<div><p>Indicates whether or not to add EOL at the end of each log entry.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.add_logfile">
<tt class="descname">add_logfile</tt><big>(</big><em>flog</em>, <em>initial_skip=2</em>, <em>can_close=None</em>, <em>mode=None</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.add_logfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Add (and open, if necessary) a log file to the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>flog</strong> : str, file, None, list of str or file objects (Default = None)</p>
<blockquote>
<div><p>File name or file object to be added.</p>
</div></blockquote>
<p><strong>initial_skip</strong> : int (Default = 2)</p>
<blockquote>
<div><p>The number of blank line to be written to the file <em>if</em> <em>not</em>
at the beginning of the file.</p>
</div></blockquote>
<p><strong>can_close</strong> : bool, None (Default = None)</p>
<blockquote>
<div><p>Indicates whether the file object can be closed by the
<tt class="xref py py-meth docutils literal"><span class="pre">close()</span></tt> function:</p>
<ul class="simple">
<li><tt class="xref py py-obj docutils literal"><span class="pre">can_close</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> &#8211; file can be closed by the
<tt class="xref py py-meth docutils literal"><span class="pre">close()</span></tt> function;</li>
<li><tt class="xref py py-obj docutils literal"><span class="pre">can_close</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> &#8211; file will not be closed by the
<tt class="xref py py-meth docutils literal"><span class="pre">close()</span></tt> function;</li>
<li><tt class="xref py py-obj docutils literal"><span class="pre">can_close</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> &#8211; automatic selection based on the type
of the <tt class="xref py py-obj docutils literal"><span class="pre">flog</span></tt> argument: <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> if flog is a string
(e.g., file name), <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> otherwise.</li>
</ul>
</div></blockquote>
<p><strong>mode</strong> : str, None (Default = None)</p>
<blockquote>
<div><p>File open mode: same meaning as the <tt class="xref py py-obj docutils literal"><span class="pre">mode</span></tt> parameter of the
Python&#8217;s built-in <a class="reference external" href="http://docs.python.org/library/functions.html#open" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">open()</span></tt></a> function. If <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>, the mode
will be inherited from file open mode set during initialization.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>flog</strong> : file object</p>
<blockquote class="last">
<div><p>File object of newly opened (or attached) file.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close all files <em>opened by</em> <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a>.</p>
<p>It will close all files <em>opened by</em> <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> - essentially,
all files added as file name. It will <em>not</em> close files added
as file handles.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.enable_console">
<tt class="descname">enable_console</tt><big>(</big><em>enable=True</em>, <em>enableBold=True</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.enable_console" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable output to the standard console &#8211; <a class="reference external" href="http://docs.python.org/library/sys.html#sys.stdout" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">sys.stdout</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>enable</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Enable or disable output to <a class="reference external" href="http://docs.python.org/library/sys.html#sys.stdout" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">sys.stdout</span></tt></a>.</p>
</div></blockquote>
<p><strong>enableBold</strong> : bool (Default = True)</p>
<blockquote class="last">
<div><p>Enable or disable writing bold text to console, e.g., &#8216;WARNING:&#8217;
&#8216;ERROR:&#8217;, etc.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.error">
<tt class="descname">error</tt><big>(</big><em>msg</em>, <em>*fmt</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints an error message. The word &#8216;ERROR:&#8217; will be printed as bold
on the console and enclosed in asterisks (*) in a disk file.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.flush">
<tt class="descname">flush</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all files.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.important">
<tt class="descname">important</tt><big>(</big><em>msg</em>, <em>*fmt</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.important" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints an &#8220;important&#8221; message. The word &#8216;IMPORTANT:&#8217; will be printed
as bold on the console and enclosed in asterisks (*) in a disk file.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.logentry">
<tt class="descname">logentry</tt><big>(</big><em>msg</em>, <em>*fmt</em>, <em>**skip</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.logentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a log entry to the log files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>msg</strong> : str</p>
<blockquote>
<div><p>String to be printed. Can contain replacement fields delimited
by braces {}.</p>
</div></blockquote>
<p><strong>fmt</strong> :</p>
<blockquote>
<div><p>Parameters to be passed to <a class="reference external" href="http://docs.python.org/library/stdtypes.html#str.format" title="(in Python v2.7)"><tt class="xref py py-meth docutils literal"><span class="pre">str.format()</span></tt></a> method for
formatting the string <tt class="xref py py-obj docutils literal"><span class="pre">msg</span></tt>.</p>
</div></blockquote>
<p><strong>skip</strong> : int</p>
<blockquote class="last">
<div><p>Number of empty lines that should follow the log message.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">logentry</span><span class="p">(</span><span class="s">&#39;Sky background for chip {} is {}&#39;</span><span class="p">,</span> <span class="s">&#39;SCI1&#39;</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">will print:</span>
<span class="go">Sky background for chip SCI1 is 10.0</span>
<span class="go">followed by two blank lines.</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.print_endlog_msg">
<tt class="descname">print_endlog_msg</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.print_endlog_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a message (&#8220;Log written to...&#8221;) indicating the end of the log.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.set_close_flag">
<tt class="descname">set_close_flag</tt><big>(</big><em>fh</em>, <em>can_close=True</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.set_close_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the &#8220;can be closed&#8221; status of a given file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>fh</strong> : file object</p>
<p><strong>can_close</strong> : bool (Default = True)</p>
<blockquote class="last">
<div><p>Indicates if the file can be closed by the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog.close" title="stsci.skypac.utils.MultiFileLog.close"><tt class="xref py py-meth docutils literal"><span class="pre">close()</span></tt></a>
function.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">File object <tt class="xref py py-obj docutils literal"><span class="pre">fh</span></tt> <strong>must</strong> have been already added to
the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> object.</p>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.skip">
<tt class="descname">skip</tt><big>(</big><em>nlines=1</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip a specified number of blank lines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><strong>nlines</strong> : int (Default = 1)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.unclose_copy">
<tt class="descname">unclose_copy</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.unclose_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a copy of the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> object with all the attached files
marked as &#8220;keep open&#8221;, that is, the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog.close" title="stsci.skypac.utils.MultiFileLog.close"><tt class="xref py py-meth docutils literal"><span class="pre">close()</span></tt></a> will not close
these files.</p>
<p>This is useful before passing the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> object to a function
that may add its own log files, and then attempt to close the files
with the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog.close" title="stsci.skypac.utils.MultiFileLog.close"><tt class="xref py py-meth docutils literal"><span class="pre">close()</span></tt></a> method. Thus, by passing an &#8220;unclose copy&#8221;,
one can be sure that the files opened at the top level will not be
closed by other functions to which the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> object may be
passed.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.MultiFileLog.warning">
<tt class="descname">warning</tt><big>(</big><em>msg</em>, <em>*fmt</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a warning message. The word &#8216;WARNING:&#8217; will be printed as bold
on the console and enclosed in asterisks (*) in a disk file.</p>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.MultiFileLog.count">
<tt class="descname">count</tt><a class="headerlink" href="#stsci.skypac.utils.MultiFileLog.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of files attached to the <a class="reference internal" href="#stsci.skypac.utils.MultiFileLog" title="stsci.skypac.utils.MultiFileLog"><tt class="xref py py-obj docutils literal"><span class="pre">MultiFileLog</span></tt></a> object
excluding the <a class="reference external" href="http://docs.python.org/library/sys.html#sys.stdout" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">sys.stdout</span></tt></a> file.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stsci.skypac.utils.ResourceRefCount">
<em class="property">class </em><tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">ResourceRefCount</tt><big>(</big><em>resource</em>, <em>resource_close_fnct=None</em>, <em>*close_args</em>, <em>**close_kwargs</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount" title="Permalink to this definition">¶</a></dt>
<dd><p>A class that implements reference counting for various resources:
file objects, PyFITS HDU lists, etc. It is intended to be used as a
mechanism of controlling the &#8220;lifespan&#8221; of resources that can be used
in different parts of the code &#8220;indipendently&#8221;. The resource is kept
open as long as the reference count is larger than zero. Once the
reference count is decreased to 0, the resource is automatically closed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The reference count of the newly created <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-obj docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object
is set to 0. It is user&#8217;s responsibility to increment the reference
count of this object through the call to <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount.hold" title="stsci.skypac.utils.ResourceRefCount.hold"><tt class="xref py py-meth docutils literal"><span class="pre">hold()</span></tt></a> function.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>resource</strong> :</p>
<blockquote>
<div><p>An object who must be kept open or closed based on reference count.</p>
</div></blockquote>
<p><strong>resource_close_fnct</strong> : function (Default = None)</p>
<blockquote>
<div><p>The function (usually a method of the attached resource), that can
&#8220;close&#8221; the resource.</p>
</div></blockquote>
<p><strong>close_args</strong> : tuple</p>
<blockquote>
<div><p>Positional arguments to be passed to the
<tt class="xref py py-meth docutils literal"><span class="pre">resource_close_fnct()</span></tt> function.</p>
</div></blockquote>
<p><strong>close_kwargs</strong> : dict</p>
<blockquote class="last">
<div><p>Keyword arguments to be passed to the <tt class="xref py py-meth docutils literal"><span class="pre">resource_close_fnct()</span></tt>
function.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stsci.skypac.utils.ResourceRefCount.hold">
<tt class="descname">hold</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.hold" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment the reference count of the attached resource.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.ResourceRefCount.is_subscribed_on_close">
<tt class="descname">is_subscribed_on_close</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.is_subscribed_on_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the object is subscribed to on close notifications.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.ResourceRefCount.release">
<tt class="descname">release</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrement reference count of the attached resource. If the reference
count reaches zero, call all registered &#8220;on close&#8221; notify callbacks,
and then call the &#8220;close&#8221; method on the resource which was set
at initialization of the <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-obj docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object. Finally,
the <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount.resource" title="stsci.skypac.utils.ResourceRefCount.resource"><tt class="xref py py-obj docutils literal"><span class="pre">resource</span></tt></a> property of the <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-obj docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object will be
set to <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.ResourceRefCount.subscribe_close_notify">
<tt class="descname">subscribe_close_notify</tt><big>(</big><em>obj</em>, <em>callback=None</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.subscribe_close_notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the object and its method that need to be called when the resource
is about to be closed.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.ResourceRefCount.unsubscribe_close_notify">
<tt class="descname">unsubscribe_close_notify</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.unsubscribe_close_notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the object (and its method) from the list of callbacks that
need to be notified of impending closing of the resource.</p>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.ResourceRefCount.closed">
<tt class="descname">closed</tt><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if the resource is &#8220;closed&#8221;.</p>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.ResourceRefCount.refcount">
<tt class="descname">refcount</tt><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.refcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference count.</p>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.ResourceRefCount.resource">
<tt class="descname">resource</tt><a class="headerlink" href="#stsci.skypac.utils.ResourceRefCount.resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource attached to a <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-obj docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stsci.skypac.utils.ImageRef">
<em class="property">class </em><tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">ImageRef</tt><big>(</big><em>hdulist_refcnt=None</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ImageRef" title="Permalink to this definition">¶</a></dt>
<dd><p>A lightweight class that supports reference counting for FITS images
and holds a <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object. It provides several
attributes that describe main characteristics of the image (file) and
essential functions for manipulating reference count.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>hdulist_refcnt</strong> : ResourceRefCount</p>
<blockquote class="last">
<div><p>A <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object holding a <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt>
object.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="3%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>filename</td>
<td>str</td>
<td>Name of the opened file. Can be <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> for in-memory created        <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> objects.</td>
</tr>
<tr class="row-even"><td>can_reload_data</td>
<td>bool</td>
<td><a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> for files attached to a physical file, <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> for in-memory         <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> objects.</td>
</tr>
<tr class="row-odd"><td>original_fname</td>
<td>str</td>
<td>Original name of the file as requested by the user. <em>Note:</em> may be         different from <tt class="xref py py-obj docutils literal"><span class="pre">filename</span></tt> if the orininal file was in GEIS or         WAIVER FITS format and subsequently was converted to a MEF FITS         format. In that case this attribute will show the name of the         original GEIS or WAIVER FITS file.</td>
</tr>
<tr class="row-even"><td>original_ftype</td>
<td>str</td>
<td>Type of the original file. Can take one of the following values:         &#8216;MEF&#8217;, &#8216;SIMPLE&#8217;, &#8216;GEIS&#8217;, &#8216;WAIVER&#8217;, or &#8216;UNKNOWN&#8217;.</td>
</tr>
<tr class="row-odd"><td>original_exists</td>
<td>bool</td>
<td>Indicates if the physical file exists. It is <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> for in-memory         images.</td>
</tr>
<tr class="row-even"><td>mef_fname</td>
<td>str, None</td>
<td>Name of the MEF FITS file if exists, <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> otherwise.</td>
</tr>
<tr class="row-odd"><td>mef_exists</td>
<td>bool</td>
<td>Indicates whether the MEF FITS file exists.</td>
</tr>
<tr class="row-even"><td>DQ_model</td>
<td>str, None</td>
<td>Type of the DQ model: &#8216;external&#8217; for WFPC, WFPC2, and FOC         instruments (or non-HST data if set so) that have DQ data in a         separate (from image) file and &#8216;intrinsic&#8217; for ACS, etc. images         that have DQ extensions in the image file. It is <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> if         the image does not have DQ data.</td>
</tr>
<tr class="row-odd"><td>telescope</td>
<td>str</td>
<td>Telescope that acquired the image.</td>
</tr>
<tr class="row-even"><td>instrument</td>
<td>str</td>
<td>Instrument used to acquire data.</td>
</tr>
<tr class="row-odd"><td>fmode</td>
<td>str</td>
<td>File mode used to open FITS file. See <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.open</span></tt> for more details.</td>
</tr>
<tr class="row-even"><td>memmap</td>
<td>bool</td>
<td>Is the <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> memory mapped?</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stsci.skypac.utils.ImageRef.hold">
<tt class="descname">hold</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ImageRef.hold" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment the reference count of the attached resource.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.ImageRef.info">
<tt class="descname">info</tt><big>(</big><em>self</em>, <em>fh=sys.stdout</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ImageRef.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a summary of the object attributes.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.ImageRef.release">
<tt class="descname">release</tt><big>(</big><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ImageRef.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrement reference count of the attached resource. If the reference
count reaches zero, the attached <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object
will be closed and set to <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stsci.skypac.utils.ImageRef.set_HDUList_RefCount">
<tt class="descname">set_HDUList_RefCount</tt><big>(</big><em>hdulist_refcnt=None</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ImageRef.set_HDUList_RefCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Set (attach) a new <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object that holds
a <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> object. This is allowed only if the already
attached <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> can be closed. The reference
count of the <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> being attached will be
incremented.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>hdulist_refcnt</strong> : ResourceRefCount, None</p>
<blockquote>
<div><p>A <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object containing a
<tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> object. If it is <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>,it will release
and close the attached <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> object.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>ValueError</strong> :</p>
<blockquote>
<div><p>The (already) attached <a class="reference internal" href="#stsci.skypac.utils.ResourceRefCount" title="stsci.skypac.utils.ResourceRefCount"><tt class="xref py py-class docutils literal"><span class="pre">ResourceRefCount</span></tt></a> must have
reference count &lt;= 1 so that it can be closed before being
replaced with a new resource.</p>
</div></blockquote>
<p><strong>ValueError</strong> :</p>
<blockquote class="last">
<div><p>The resource being attached must be in an open state.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.ImageRef.closed">
<tt class="descname">closed</tt><a class="headerlink" href="#stsci.skypac.utils.ImageRef.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the <a class="reference internal" href="#stsci.skypac.utils.ImageRef" title="stsci.skypac.utils.ImageRef"><tt class="xref py py-class docutils literal"><span class="pre">ImageRef</span></tt></a> object closed?</p>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.ImageRef.extname">
<tt class="descname">extname</tt><a class="headerlink" href="#stsci.skypac.utils.ImageRef.extname" title="Permalink to this definition">¶</a></dt>
<dd><p>Extension name of the first extension.</p>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.ImageRef.hdu">
<tt class="descname">hdu</tt><a class="headerlink" href="#stsci.skypac.utils.ImageRef.hdu" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> of the attached image.</p>
</dd></dl>

<dl class="attribute">
<dt id="stsci.skypac.utils.ImageRef.refcount">
<tt class="descname">refcount</tt><a class="headerlink" href="#stsci.skypac.utils.ImageRef.refcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Reference count of the attached <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt>.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.is_countrate">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">is_countrate</tt><big>(</big><em>hdulist</em>, <em>ext</em>, <em>units_kwd='BUNIT'</em>, <em>guess_if_missing=True</em>, <em>telescope=None</em>, <em>instrument=None</em>, <em>verbose=True</em>, <em>flog=None</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.is_countrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Infer the units of the data of the input image from the input image.
Specifically, it tries to infer whether the units are counts (or
count-like) or if the units are count-<tt class="xref py py-obj docutils literal"><span class="pre">rate</span></tt>.</p>
<p>The units of data are determined from the <tt class="docutils literal"><span class="pre">BUNIT</span></tt> header keyword by
searching its value for the division sign &#8216;/&#8217;. If the division sign is
not found, then the units are assumed to be &#8220;counts&#8221;. If the division
sign is found in the <tt class="docutils literal"><span class="pre">BUNIT</span></tt> value and if the numerator is one of
the following: &#8216;ELECTRONS&#8217;,&#8217;COUNTS&#8217;, or &#8216;DN&#8217;, and denumerator is either
&#8216;S&#8217;,&#8217;SEC&#8217;, or &#8216;SECOND&#8217;, then the units are assumed to be count-rate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>hdulist</strong> : <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt></p>
<blockquote>
<div><p><tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> of the image.</p>
</div></blockquote>
<p><strong>ext</strong> : tuple, int, str</p>
<blockquote>
<div><p>Extension specification for whose data the units need to be inferred.
An int <tt class="xref py py-obj docutils literal"><span class="pre">ext</span></tt> specifies extension number. A tuple in the form
(str, int) specifies extension name and number. A string <tt class="xref py py-obj docutils literal"><span class="pre">ext</span></tt>
specifies extension name and the extension version is assumed to be
1. See documentation for <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.getData</span></tt>
for examples.</p>
</div></blockquote>
<p><strong>units_kwd</strong> : str (Default = &#8216;BUNIT&#8217;)</p>
<blockquote>
<div><p>FITS header keyword describing data units of the image. This keyword
is assumed to be in the header of the extension specified by the
<tt class="xref py py-obj docutils literal"><span class="pre">ext</span></tt> parameter.</p>
</div></blockquote>
<p><strong>guess_if_missing</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Instructs to try make best guess on image units when the keyword
specified by <tt class="xref py py-obj docutils literal"><span class="pre">units_kwd</span></tt> is not found in the image header. The first
action will be to look for this keyword in the primary header, and
if not found, infer the units based on the telescope, instrument,
and detector information.</p>
</div></blockquote>
<p><strong>telescope</strong> : str, None (Default = None)</p>
<blockquote>
<div><p>Specifies the telescope from which the data came. If not specified,
the value specified in the <tt class="docutils literal"><span class="pre">TELESCOP</span></tt> keyword in the primary
header will be used.</p>
</div></blockquote>
<p><strong>instrument</strong> : str, None (Default = None)</p>
<blockquote>
<div><p>Specifies the instrument used for acquiring data. If not specified,
the value specified in the <tt class="docutils literal"><span class="pre">INSTRUME</span></tt> keyword in the primary
header will be used.</p>
</div></blockquote>
<p><strong>verbose</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Specifies whether to print warning messages.</p>
</div></blockquote>
<p><strong>flog</strong> : str, file, MultiFileLog, None (Default = None)</p>
<blockquote>
<div><p>Specifies the log file to which the messages should be printed.
It can be a file name, a file object, a MultiFileLog object, or None.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>bool, None</strong> :</p>
<blockquote class="last">
<div><p>Returns <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> if the units of the input image for a given extension
are count-rate-like and <a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> if the units are count-like. Returns
<a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> if the units cannot be inferred from the header.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.ext2str">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">ext2str</tt><big>(</big><em>ext</em>, <em>compact=False</em>, <em>default_extver=1</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.ext2str" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string representation of an extension specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>ext</strong> : tuple, int, str</p>
<blockquote>
<div><p>Extension specification can be a tuple of the form (str,int), e.g.,
(&#8216;sci&#8217;,1), an integer (extension number), or a string (extension
name).</p>
</div></blockquote>
<p><strong>compact</strong> : bool (Default = False)</p>
<blockquote>
<div><p>If <tt class="xref py py-obj docutils literal"><span class="pre">compact</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a> the returned string will have extension
name quoted and separated by a comma from the extension number,
e.g., &#8220;&#8216;sci&#8217;,1&#8221;.
If <tt class="xref py py-obj docutils literal"><span class="pre">compact</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> the returned string will have extension
version immediately follow the extension name, e.g., &#8216;sci1&#8217;.</p>
</div></blockquote>
<p><strong>default_extver</strong> : int (Default = 1)</p>
<blockquote>
<div><p>Specifies the extension version to be used when the <tt class="xref py py-obj docutils literal"><span class="pre">ext</span></tt> parameter
is a string (extension name).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>strext</strong> : str</p>
<blockquote>
<div><p>String representation of extension specification <tt class="xref py py-obj docutils literal"><span class="pre">ext</span></tt>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>TypeError</strong> :</p>
<blockquote class="last">
<div><p>Unexpected extension type.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ext2str</span><span class="p">(</span><span class="s">&#39;sci&#39;</span><span class="p">,</span><span class="n">compact</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">default_extver</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="go">&quot;&#39;sci&#39;,6&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ext2str</span><span class="p">((</span><span class="s">&#39;sci&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="go">&quot;&#39;sci&#39;,2&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ext2str</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">&#39;4&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ext2str</span><span class="p">(</span><span class="s">&#39;dq&#39;</span><span class="p">)</span>
<span class="go">&quot;&#39;dq&#39;,1&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ext2str</span><span class="p">(</span><span class="s">&#39;dq&#39;</span><span class="p">,</span><span class="n">default_extver</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;&#39;dq&#39;,2&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ext2str</span><span class="p">(</span><span class="s">&#39;sci&#39;</span><span class="p">,</span><span class="n">compact</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">default_extver</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;sci2&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.openImageEx">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">openImageEx</tt><big>(</big><em>filename</em>, <em>mode='readonly'</em>, <em>dqmode='readonly'</em>, <em>memmap=True</em>, <em>saveAsMEF=True</em>, <em>output_base_fitsname=None</em>, <em>clobber=True</em>, <em>imageOnly=False</em>, <em>openImageHDU=True</em>, <em>openDQHDU=False</em>, <em>preferMEF=True</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.openImageEx" title="Permalink to this definition">¶</a></dt>
<dd><p>Open an image file and (if requested) the associated DQ file and return
corresponding <a class="reference internal" href="#stsci.skypac.utils.ImageRef" title="stsci.skypac.utils.ImageRef"><tt class="xref py py-class docutils literal"><span class="pre">ImageRef</span></tt></a> objects.</p>
<p>This function is an enhanced version of
<tt class="xref py py-func docutils literal"><span class="pre">stsci.tools.fileutil.openImage()</span></tt> function in that it can open
both the image file and the associated DQ image. It also provides
additional inormation about the opened files: file type, original file
name, DQ model (&#8220;intrinsic&#8221;, where DQ data are placed in the same file
as the science data, or &#8220;extrinsic&#8221; when DQ data are in a separate file
from the science data), etc. Because of the way it was implemented, it
requires half of the number of calls to <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.open</span></tt> thus making it
almost twice as fast as the <tt class="xref py py-func docutils literal"><span class="pre">openImage()</span></tt>
function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>filename</strong> : str</p>
<blockquote>
<div><p>File name of the file to be opened. The image file formats are
recognized: simple/MEF FITS, HST GEIS format, or WAIVER FITS format.</p>
</div></blockquote>
<p><strong>mode</strong> : str (Default = &#8216;readonly&#8217;)</p>
<blockquote>
<div><p>File mode used to open main image FITS file. See <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.open</span></tt>
for more details.</p>
</div></blockquote>
<p><strong>dqmode</strong> : str (Default = &#8216;readonly&#8217;)</p>
<blockquote>
<div><p>File mode used to open DQ image FITS file. See parameter <tt class="xref py py-obj docutils literal"><span class="pre">mode</span></tt>
above for more details.</p>
</div></blockquote>
<p><strong>memmap</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Should memory mapping to be used whe opening simple/MEF FITS?</p>
</div></blockquote>
<p><strong>saveAsMEF</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Should an input GEIS or WAIVER FITS be converted to simple/MEF FITS?</p>
</div></blockquote>
<p><strong>output_base_fitsname</strong> : str, None (Default = None)</p>
<blockquote>
<div><p>The base name of the output simple/MEF FITS when <tt class="xref py py-obj docutils literal"><span class="pre">saveAsMEF</span></tt> is
<a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>. If it is <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>, the file name of the converted file
will be determined according to HST file naming conventions.</p>
</div></blockquote>
<p><strong>clobber</strong> : bool (Default = True)</p>
<blockquote>
<div><p>If <tt class="xref py py-obj docutils literal"><span class="pre">saveAsMEF</span></tt> is <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, should any existing output files be
overwritten?</p>
</div></blockquote>
<p><strong>imageOnly</strong> : bool (Default = False)</p>
<blockquote>
<div><p>Should this function open the image file only? If <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, then
the DQ-related attributes will not be valid.</p>
</div></blockquote>
<p><strong>openImageHDU</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Indicates whether the returned <a class="reference internal" href="#stsci.skypac.utils.ImageRef" title="stsci.skypac.utils.ImageRef"><tt class="xref py py-class docutils literal"><span class="pre">ImageRef</span></tt></a> object
corresponding to the science image file should be
in an open or closed state.</p>
</div></blockquote>
<p><strong>openDQHDU</strong> : bool (Default = False)</p>
<blockquote>
<div><p>Indicates whether the returned <a class="reference internal" href="#stsci.skypac.utils.ImageRef" title="stsci.skypac.utils.ImageRef"><tt class="xref py py-class docutils literal"><span class="pre">ImageRef</span></tt></a> object
corresponding to the DQ image file should be in an open or closed
state.</p>
</div></blockquote>
<p><strong>preferMEF</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Should this function open an existing MEF file that complies with
HST naming convention when the input file is in GEIS or WAIVER FITS
format, even when <tt class="xref py py-obj docutils literal"><span class="pre">saveAsMEF</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> or <tt class="xref py py-obj docutils literal"><span class="pre">clobber</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a>?</p>
</div></blockquote>
<p><strong>verbose</strong> : bool (Default = True)</p>
<blockquote>
<div><p>If <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, some addition information will be printed out to
standard output.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>(img, dqimg)</strong> : (ImageRef, ImageRef)</p>
<blockquote>
<div><p>A tuple of <a class="reference internal" href="#stsci.skypac.utils.ImageRef" title="stsci.skypac.utils.ImageRef"><tt class="xref py py-class docutils literal"><span class="pre">ImageRef</span></tt></a> objects corresponding to the science
image and to the DQ image. Each object in the returned tuple open
or closed depending on the input arguments.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the returned object is <em>open</em>, then its reference count will
be at least 1. The caller is responsible for &#8220;releasing&#8221; the
object when it is no longer needed.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the DQ model of the opened file is &#8220;intrinsic&#8221;, then the
<tt class="xref py py-obj docutils literal"><span class="pre">dqimg</span></tt> component of the returned tuple will hold a reference
counter to the same image. Thus, for &#8220;intrinsic&#8221; DQ data models,
the reference count of the returned objects may be 2 (if both
science <tt class="xref py py-obj docutils literal"><span class="pre">openImageHDU</span></tt> and <tt class="xref py py-obj docutils literal"><span class="pre">openDQHDU</span></tt> are <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>).</p>
</div>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>ValueError</strong> :</p>
<blockquote>
<div><p>If input file is neither a GEIS file nor a FITS file.</p>
</div></blockquote>
<p><strong>ValueError</strong> :</p>
<blockquote class="last">
<div><p>Errors occured while accessing/reading the file possibly due to
corrupted file, non-compliant file format, etc.s</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.count_extensions">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">count_extensions</tt><big>(</big><em>img</em>, <em>extname='SCI'</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.count_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt> extensions in the input image <tt class="xref py py-obj docutils literal"><span class="pre">img</span></tt>.
If <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt> is <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>, return the number of all image-like extensions.</p>
<p>Input parameters are identical to those of <a class="reference internal" href="#stsci.skypac.utils.get_extver_list" title="stsci.skypac.utils.get_extver_list"><tt class="xref py py-func docutils literal"><span class="pre">get_extver_list()</span></tt></a>.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#stsci.skypac.utils.get_extver_list" title="stsci.skypac.utils.get_extver_list"><tt class="xref py py-obj docutils literal"><span class="pre">get_extver_list</span></tt></a>, <a class="reference internal" href="#stsci.skypac.utils.get_ext_list" title="stsci.skypac.utils.get_ext_list"><tt class="xref py py-obj docutils literal"><span class="pre">get_ext_list</span></tt></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">count_extensions</span><span class="p">(</span><span class="s">&#39;j9irw1rqq_flt.fits&#39;</span><span class="p">,</span><span class="n">extname</span><span class="o">=</span><span class="s">&#39;SCI&#39;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count_extensions</span><span class="p">(</span><span class="s">&#39;j9irw1rqq_flt.fits&#39;</span><span class="p">,</span><span class="n">extname</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.get_ext_list">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">get_ext_list</tt><big>(</big><em>img</em>, <em>extname='SCI'</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.get_ext_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all extension versions of <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt> extensions.
<tt class="xref py py-obj docutils literal"><span class="pre">img</span></tt> can be either a file name or a <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> object.</p>
<p>This function is similar to <a class="reference internal" href="#stsci.skypac.utils.get_extver_list" title="stsci.skypac.utils.get_extver_list"><tt class="xref py py-func docutils literal"><span class="pre">get_extver_list()</span></tt></a>, the main
difference being that it returns a list of fully qualified extensions:     either tuples of the form (<tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt>,<tt class="xref py py-obj docutils literal"><span class="pre">extver</span></tt>) or integer extension
numbers (when <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>).</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#stsci.skypac.utils.get_extver_list" title="stsci.skypac.utils.get_extver_list"><tt class="xref py py-obj docutils literal"><span class="pre">get_extver_list</span></tt></a>, <a class="reference internal" href="#stsci.skypac.utils.count_extensions" title="stsci.skypac.utils.count_extensions"><tt class="xref py py-obj docutils literal"><span class="pre">count_extensions</span></tt></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_ext_list</span><span class="p">(</span><span class="s">&#39;j9irw1rqq_flt.fits&#39;</span><span class="p">,</span><span class="n">extname</span><span class="o">=</span><span class="s">&#39;SCI&#39;</span><span class="p">)</span>
<span class="go">[(&#39;SCI&#39;, 1), (&#39;SCI&#39;, 2)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_ext_list</span><span class="p">(</span><span class="s">&#39;j9irw1rqq_flt.fits&#39;</span><span class="p">,</span><span class="n">extname</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4, 5, 6, 8, 9, 10, 11]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.get_extver_list">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">get_extver_list</tt><big>(</big><em>img</em>, <em>extname='SCI'</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.get_extver_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all extension versions with <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt> extension
names. If <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt> is <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>, return extension <strong>numbers</strong> of all
image-like extensions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If input image is a <tt class="xref py py-obj docutils literal"><span class="pre">ImageRef</span></tt>, this function will
<strong>not</strong> modify its reference count.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>img</strong> : str, <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt>, or <tt class="xref py py-obj docutils literal"><span class="pre">ImageRef</span></tt></p>
<blockquote>
<div><p>Input image object. If <tt class="xref py py-obj docutils literal"><span class="pre">img</span></tt> is a string object (file name) then that
file will be opened. If the file pointed to by the file name is a
GEIS or WAIVER FITS file, it will be converted to a simple/MEF FITS
format if <tt class="xref py py-obj docutils literal"><span class="pre">clobber`=`True</span></tt>.</p>
</div></blockquote>
<p><strong>extname</strong> : str (Default = &#8216;SCI&#8217;)</p>
<blockquote>
<div><p>Indicates extension <em>name</em> for which all existing extension <em>versions</em>
should be found. If <tt class="xref py py-obj docutils literal"><span class="pre">extname`=`None</span></tt>, then
<tt class="xref py py-obj docutils literal"><span class="pre">get_extver_list</span></tt> will return a list of extension
<em>numbers</em> of all image-like extensions.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>extver</strong> : list</p>
<blockquote>
<div><p>List of extension versions corresponding to the input <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt>.
If <tt class="xref py py-obj docutils literal"><span class="pre">extname`=`None</span></tt>, it will return a list of extension
<em>numbers</em> of all image-like extensions.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>IOError</strong> :</p>
<blockquote>
<div><p>Unable to open input image file.</p>
</div></blockquote>
<p><strong>TypeError</strong> :</p>
<blockquote>
<div><p>Argument <tt class="xref py py-obj docutils literal"><span class="pre">img</span></tt> must be either a file name (str),
an <a class="reference internal" href="#stsci.skypac.utils.ImageRef" title="stsci.skypac.utils.ImageRef"><tt class="xref py py-obj docutils literal"><span class="pre">ImageRef</span></tt></a>, or a <tt class="xref py py-obj docutils literal"><span class="pre">astropy.io.fits.HDUList</span></tt> object.</p>
</div></blockquote>
<p><strong>TypeError</strong> :</p>
<blockquote class="last">
<div><p>Argument <tt class="xref py py-obj docutils literal"><span class="pre">extname</span></tt> must be either a string or None.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#stsci.skypac.utils.get_ext_list" title="stsci.skypac.utils.get_ext_list"><tt class="xref py py-obj docutils literal"><span class="pre">get_ext_list</span></tt></a>, <a class="reference internal" href="#stsci.skypac.utils.count_extensions" title="stsci.skypac.utils.count_extensions"><tt class="xref py py-obj docutils literal"><span class="pre">count_extensions</span></tt></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_extver_list</span><span class="p">(</span><span class="s">&#39;j9irw1rqq_flt.fits&#39;</span><span class="p">,</span><span class="n">extname</span><span class="o">=</span><span class="s">&#39;sci&#39;</span><span class="p">)</span>
<span class="go">[1, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_extver_list</span><span class="p">(</span><span class="s">&#39;j9irw1rqq_flt.fits&#39;</span><span class="p">,</span><span class="n">extname</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4, 5, 6, 8, 9, 10, 11</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.file_name_components">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">file_name_components</tt><big>(</big><em>fname</em>, <em>detect_HST_FITS_suffix=True</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.file_name_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits base file name into a root, suffix, and extension.
Given a full path, this function extracts the base name,
and splits it into three components: root name, suffix,
and file extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>fname</strong> : str</p>
<blockquote>
<div><p>file name</p>
</div></blockquote>
<p><strong>detect_HST_FITS_suffix</strong> : bool (Default = True)</p>
<blockquote>
<div><p>If True, detects the suffix of most HST files by looking for the
rightmost occurence of the underscore (&#8216;_&#8217;) in the file name.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>root</strong> : str</p>
<blockquote>
<div><p>Root name of the file. When <tt class="xref py py-obj docutils literal"><span class="pre">detect_HST_FITS_suffix</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>,
this is the part of the file name <em>preceding</em> the rightmost suffix
separator (&#8216;_&#8217;). Otherwise, it is the base file name without file
extension.</p>
</div></blockquote>
<p><strong>suffix</strong> : str</p>
<blockquote>
<div><p>If <tt class="xref py py-obj docutils literal"><span class="pre">detect_HST_FITS_suffix</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, this field will contain the
suffix of most HST files, i.e., the part of the file name contained
between the rightmost suffix separator (&#8216;_&#8217;) and file
extension separator. This return value will be an empty string if
If <tt class="xref py py-obj docutils literal"><span class="pre">detect_HST_FITS_suffix</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a> or if the file name has no
extension separator.</p>
</div></blockquote>
<p><strong>fext</strong> : str</p>
<blockquote class="last">
<div><p>File extension</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">file_name_components</span><span class="p">(</span><span class="s">&#39;/data/m87/ua0x5001m_c0f.fits&#39;</span><span class="p">)</span>
<span class="go">(&#39;ua0x5001m&#39;, &#39;c0f&#39;, &#39;.fits&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_name_components</span><span class="p">(</span><span class="s">&#39;/data/m87/ua0x5001m_c0f.fits&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="go">(&#39;ua0x5001m_c0f&#39;, &#39;&#39;, &#39;.fits&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="stsci.skypac.utils.temp_mask_file">
<tt class="descclassname">stsci.skypac.utils.</tt><tt class="descname">temp_mask_file</tt><big>(</big><em>rootname</em>, <em>suffix</em>, <em>ext</em>, <em>data</em>, <em>dir=os.path.curdir</em>, <em>fnameOnly=False</em><big>)</big><a class="headerlink" href="#stsci.skypac.utils.temp_mask_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves 2D data array to temporary simple FITS file.
The name of the emporary file is generated based on the input parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Parameters :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>data</strong> : numpy array</p>
<blockquote>
<div><p>Data to be written to the temporary FITS file. Data will be
written in the primary HDU.</p>
</div></blockquote>
<p><strong>rootname</strong> : str</p>
<blockquote>
<div><p>Root name of the file.</p>
</div></blockquote>
<p><strong>prefix</strong> : str (Default = &#8216;tmp&#8217;)</p>
<blockquote>
<div><p>Prefix to be added in front of the root name. If <tt class="xref py py-obj docutils literal"><span class="pre">randomize_prefix</span></tt>
is <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>, then a random string will be added to the right of the
string specified by <tt class="xref py py-obj docutils literal"><span class="pre">prefix</span></tt> (with no separator between them).
Prefix (or the randomized prefix) will be separated from the
root name by the string specified in <tt class="xref py py-obj docutils literal"><span class="pre">sep</span></tt>. If prefix is an empty
string (<tt class="docutils literal"><span class="pre">''</span></tt>) then no prefix will be prepended to the root file
name.</p>
</div></blockquote>
<p><strong>suffix</strong> : str (Default = &#8216;mask&#8217;)</p>
<blockquote>
<div><p>Suffix to be added to the root name. Suffix will be separated from
the root name by the string specified in <tt class="xref py py-obj docutils literal"><span class="pre">sep</span></tt>.</p>
</div></blockquote>
<p><strong>ext</strong> : int, str, or tuple of the form (str, int)</p>
<blockquote>
<div><p>Extention to be added to the temporary file <em>after</em> the suffix.
Extension name string will be separated from
the suffix by the string specified in <tt class="xref py py-obj docutils literal"><span class="pre">sep</span></tt>.</p>
</div></blockquote>
<p><strong>sep</strong> : str (Default = &#8216;_&#8217;)</p>
<blockquote>
<div><p>Separator string to be inserted between (randomized) prefix
and root name, root name and suffix, and suffix and extension.</p>
</div></blockquote>
<p><strong>randomize_prefix</strong> : bool (Default = True)</p>
<blockquote>
<div><p>Specifies whether to add (postpend) a random string to string
specified by <tt class="xref py py-obj docutils literal"><span class="pre">prefix</span></tt>.</p>
</div></blockquote>
<p><strong>dir</strong> : str (Default = os.path.curdir)</p>
<blockquote>
<div><p>Directory to which the temporary file should be written. If directory
<a class="reference external" href="http://docs.python.org/library/functions.html#dir" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">dir</span></tt></a>=<a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> then the file will be written to the default
(for more details, see the explanation for argument <a class="reference external" href="http://docs.python.org/library/functions.html#dir" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">dir</span></tt></a> to the
<a class="reference external" href="http://docs.python.org/2/library/tempfile.html#tempfile.mkstemp">tempfile.mstemp</a> function).</p>
</div></blockquote>
<p><strong>fnameOnly</strong> : bool (Default = False)</p>
<blockquote>
<div><p>Specifies what should <a class="reference internal" href="#stsci.skypac.utils.temp_mask_file" title="stsci.skypac.utils.temp_mask_file"><tt class="xref py py-obj docutils literal"><span class="pre">temp_mask_file</span></tt></a> return: file name of the
created file (if <tt class="xref py py-obj docutils literal"><span class="pre">fnameOnly</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>), or a tuple with the file
name of the created file and an open
<tt class="xref py py-class docutils literal"><span class="pre">ImageRef</span></tt> object of that file.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns :</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>fname</strong> : str</p>
<blockquote>
<div><p>File name of the temporary file.</p>
</div></blockquote>
<p><strong>mask</strong> : ImageRef</p>
<blockquote>
<div><p>An open <tt class="xref py py-class docutils literal"><span class="pre">ImageRef</span></tt> object of the temporary
FITS file. This is returned as a tuple together with the file name
only when <tt class="xref py py-obj docutils literal"><span class="pre">fnameOnly</span></tt>=<a class="reference external" href="http://docs.python.org/library/constants.html#False" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Mask data will be in the Primary HDU.</p>
</div>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Raises :</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><strong>TypeError</strong> :</p>
<blockquote class="last">
<div><p>Extension specifier must be either an integer, a string,
or a tuple of the form (str, int).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stsci</span> <span class="kn">import</span> <span class="n">skypac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">800</span><span class="p">,</span><span class="mi">800</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skypac</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">temp_mask_file</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="s">&#39;ua0x5001m&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">suffix</span><span class="o">=</span><span class="s">&#39;skymatch_mask&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;sci&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="nb">dir</span><span class="o">=</span><span class="s">&#39;/data/m87&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">fnameOnly</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&#39;/data/m87/tmp39gCpw_ua0x5001m_skymatch_mask_sci4.fits&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skypac</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">temp_mask_file</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="s">&#39;ua0x5001m&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">suffix</span><span class="o">=</span><span class="s">&#39;skymatch_mask&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;sci&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="nb">dir</span><span class="o">=</span><span class="s">&#39;.&#39;</span><span class="p">,</span> <span class="n">fnameOnly</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&#39;tmpxl7LTO_ua0x5001m_skymatch_mask_sci4.fits&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">skypac</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">temp_mask_file</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="s">&#39;ua0x5001m&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">suffix</span><span class="o">=</span><span class="s">&#39;skymatch_mask&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;sci&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="nb">dir</span><span class="o">=</span><span class="s">&#39;.&#39;</span><span class="p">,</span><span class="n">fnameOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">(&#39;tmpxMcL5g_ua0x5001m_skymatch_mask_sci4.fits&#39;, &lt;skypac.utils.ImageRef object at 0x101f5a3d0&gt;)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="skystatistics.html" title="Sky statistics functions for skypac."
             >previous</a> |</li>
        <li><a href="index.html">SkyPac 0.7 (30-May-2014) documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Mihai Cara, Warren Hack, Pey Lian Lim.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>